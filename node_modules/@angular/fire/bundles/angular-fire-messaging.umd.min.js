!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/fire"),require("@angular/common")):"function"==typeof define&&define.amd?define("@angular/fire/messaging",["exports","@angular/core","rxjs","rxjs/operators","@angular/fire","@angular/common"],r):r(((e=e||self).angular=e.angular||{},e.angular.fire=e.angular.fire||{},e.angular.fire.messaging={}),e.ng.core,e.rxjs,e.rxjs.operators,e.angular.fire,e.ng.common)}(this,(function(e,r,n,t,o,i){"use strict";var s=function(e,r,s,a){var u=this,c=new o.ɵAngularFireSchedulers(a),p=n.of(void 0).pipe(t.observeOn(c.outsideAngular),t.switchMap((function(){return i.isPlatformServer(s)?n.EMPTY:import("firebase/messaging")})),t.map((function(){return o.ɵfirebaseAppFactory(e,a,r)})),t.map((function(e){return e.messaging()})));i.isPlatformServer(s)?this.requestPermission=n.throwError("Not available on server platform."):this.requestPermission=p.pipe(t.observeOn(c.outsideAngular),t.switchMap((function(e){return e.requestPermission()}))),this.getToken=p.pipe(t.observeOn(c.outsideAngular),t.switchMap((function(e){return e.getToken()})),t.defaultIfEmpty(null));var g=p.pipe(t.observeOn(c.outsideAngular),t.switchMap((function(e){return new n.Observable(e.onTokenRefresh.bind(e)).pipe(t.switchMap((function(){return e.getToken()})))})));return this.tokenChanges=n.concat(p.pipe(t.observeOn(c.outsideAngular),t.switchMap((function(e){return e.getToken()}))),g),this.messages=p.pipe(t.observeOn(c.outsideAngular),t.switchMap((function(e){return new n.Observable(e.onMessage.bind(e))}))),this.requestToken=n.of(void 0).pipe(t.switchMap((function(){return u.requestPermission})),t.catchError((function(){return n.of(null)})),t.mergeMap((function(){return u.tokenChanges}))),this.deleteToken=function(e){return p.pipe(t.observeOn(c.outsideAngular),t.switchMap((function(r){return r.deleteToken(e)})),t.defaultIfEmpty(!1))},o.ɵlazySDKProxy(this,p,a)};s.decorators=[{type:r.Injectable,args:[{providedIn:"any"}]}],s.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.Inject,args:[o.FIREBASE_OPTIONS]}]},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[o.FIREBASE_APP_NAME]}]},{type:Object,decorators:[{type:r.Inject,args:[r.PLATFORM_ID]}]},{type:r.NgZone}]},s.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new s(r.ɵɵinject(o.FIREBASE_OPTIONS),r.ɵɵinject(o.FIREBASE_APP_NAME,8),r.ɵɵinject(r.PLATFORM_ID),r.ɵɵinject(r.NgZone))},token:s,providedIn:"any"});var a=function(){};a.decorators=[{type:r.NgModule,args:[{providers:[s]}]}],e.AngularFireMessaging=s,e.AngularFireMessagingModule=a,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-fire-messaging.umd.min.js.map